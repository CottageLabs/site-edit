Scroller={speed:20,gy:function(e){if(gy=e.offsetTop,e.offsetParent)for(;e=e.offsetParent;)gy+=e.offsetTop;return gy},scrollTop:function(){return body=document.body,d=document.documentElement,body&&body.scrollTop?body.scrollTop:d&&d.scrollTop?d.scrollTop:window.pageYOffset?window.pageYOffset:0},add:function(e,o,l){return e.addEventListener?e.addEventListener(o,l,!1):e.attachEvent?e.attachEvent("on"+o,l):void 0},end:function(e){return window.event?(window.event.cancelBubble=!0,void(window.event.returnValue=!1)):void(e.preventDefault&&e.stopPropagation&&(e.preventDefault(),e.stopPropagation()))},scroll:function(e){i=window.innerHeight||document.documentElement.clientHeight,h=document.body.scrollHeight,a=Scroller.scrollTop(),a+=e>a?Math.ceil(h-e>i?(e-a)/Scroller.speed:(e-a-(h-e))/Scroller.speed):(e-a)/Scroller.speed,window.scrollTo(0,a),(a==e||Scroller.offsetTop==a)&&clearInterval(Scroller.interval),Scroller.offsetTop=a},init:function(){Scroller.add(window,"load",Scroller.render)},render:function(){for(a=document.getElementsByTagName("a"),Scroller.end(this),window.onscroll,i=0;i<a.length;i++)l=a[i],!l.href||-1==l.href.indexOf("#")||l.pathname!=location.pathname&&"/"+l.pathname!=location.pathname||(Scroller.add(l,"click",Scroller.end),l.onclick=function(){for(Scroller.end(this),l=this.hash.substr(1),a=document.getElementsByTagName("a"),i=0;i<a.length;i++)a[i].name==l&&(clearInterval(Scroller.interval),Scroller.interval=setInterval("Scroller.scroll("+Scroller.gy(a[i])+")",10))})}},Scroller.init();
