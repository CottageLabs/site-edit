postgres:
  build: ./docker-postgres
  restart: always

  ports:
    - 32345:5432

  volumes:
    - ./volumes/postgres:/var/lib/postgresql/data

php:
  build: ./emlo-edit-php
  restart: always

  ports:
    - 8080:80

  links:
    - postgres

  env_file:
    - docker-compose.php.env

  volumes:
    -  ./docker-exporter/exporter/exports:/var/www/html/exports
    -  ./docker-exporter/exporter/exporter_data:/var/www/exporter/exporter_data

    - ./volumes/csv:/csv
    - ./volumes/ssh:/root/.ssh

exporter:
  build: ./docker-exporter
  restart: always

  links:
    - postgres

  volumes:
    -  ./docker-exporter/exporter/exports:/usr/src/app/exports
    -  ./docker-exporter/exporter/exporter_data:/usr/src/app/exporter_data

nginx:
  build: ./nginx
  restart: always

  links:
    - php

  ports:
    - 80:80
    - 443:443
    - 3000:3000